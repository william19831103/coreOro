DROP PROCEDURE IF EXISTS add_migration;
delimiter ??
CREATE PROCEDURE `add_migration`()
BEGIN
DECLARE v INT DEFAULT 1;
SET v = (SELECT COUNT(*) FROM `migrations` WHERE `id`='20231105183802');
IF v=0 THEN
INSERT INTO `migrations` VALUES ('20231105183802');
-- Add your query below.


-- Pathing for Captain Armando Ossex Entry: 16392
SET @NPC := 16990;
UPDATE `creature` SET `wander_distance`=0,`movement_type`=2,`position_x`=103.116,`position_y`=-186.76497,`position_z`=127.20985 WHERE `guid`=@NPC;
DELETE FROM `creature_movement` WHERE `id`=@NPC;
INSERT INTO `creature_movement` (`id`,`point`,`position_x`,`position_y`,`position_z`,`orientation`,`waittime`,`wander_distance`,`script_id`) VALUES
(@NPC,1,103.116,-186.76497,127.20985,100,0,0,0),
(@NPC,2,99.61415,-203.17793,126.37726,100,0,0,0),
(@NPC,3,88.930016,-219.35107,127.74273,100,0,0,0),
(@NPC,4,81.033966,-227.33937,128.8015,100,0,0,0),
(@NPC,5,68.89204,-235.83255,129.54388,100,0,0,0),
(@NPC,6,58.5523,-233.14784,129.52432,100,0,0,0),
(@NPC,7,51.736652,-242.24323,129.54388,100,0,0,0),
(@NPC,8,49.698242,-254.70393,129.36476,100,0,0,0),
(@NPC,9,33.13867,-274.61475,133.0221,100,0,0,0),
(@NPC,10,26.55024,-284.1707,133.20392,100,0,0,0),
(@NPC,11,14.19846,-299.36685,132.5938,100,0,0,0),
(@NPC,12,26.517094,-284.21146,133.18738,100,0,0,0),
(@NPC,13,33.13867,-274.61475,133.0221,100,0,0,0),
(@NPC,14,49.698242,-254.70393,129.36476,100,0,0,0),
(@NPC,15,51.736652,-242.24323,129.54388,100,0,0,0),
(@NPC,16,58.5523,-233.14784,129.52432,100,0,0,0),
(@NPC,17,68.89204,-235.83255,129.54388,100,0,0,0),
(@NPC,18,81.033966,-227.33937,128.8015,100,0,0,0),
(@NPC,19,88.930016,-219.35107,127.74273,100,0,0,0),
(@NPC,20,99.61415,-203.17793,126.37726,100,0,0,0);
-- 0x2051680000100200000008000054FEC9 .go xyz 103.116 -186.76497 127.20985

-- Add formation
INSERT INTO `creature_groups` VALUES (16594, 16594, 0, 0, 1);
INSERT INTO `creature_groups` VALUES (16594, 16595, 2, 1.56, 1);
DELETE FROM `creature_movement` WHERE `id`=16595;
UPDATE `creature` SET `movement_type`=0,`position_x`=4.07884,`position_y`=-314.962,`position_z`=132.977 WHERE `guid`=16595;

-- Pathing for Stormpike Battleguard Entry: 14284
SET @NPC := 16594;
UPDATE `creature` SET `wander_distance`=0,`movement_type`=2,`position_x`=2.406033,`position_y`=-313.8656,`position_z`=132.95499 WHERE `guid`=@NPC;
DELETE FROM `creature_movement` WHERE `id`=@NPC;
INSERT INTO `creature_movement` (`id`,`point`,`position_x`,`position_y`,`position_z`,`orientation`,`waittime`,`wander_distance`,`script_id`) VALUES
(@NPC,1,2.406033,-313.8656,132.95499,100,0,0,0),
(@NPC,2,10.519856,-301.48434,132.67654,100,0,0,0),
(@NPC,3,19.927843,-289.34995,133.14389,100,0,0,0),
(@NPC,4,27.919922,-280.6845,133.57399,100,0,0,0),
(@NPC,5,42.269966,-263.3958,131.17068,100,0,0,0),
(@NPC,6,50.939453,-248.82593,129.1952,100,0,0,0),
(@NPC,7,54.188477,-237.81898,129.56352,100,0,0,0),
(@NPC,8,59.09082,-234.80124,129.5776,100,0,0,0),
(@NPC,9,68.63314,-234.3923,129.61089,100,0,0,0),
(@NPC,10,78.27745,-229.598,129.22675,100,0,0,0),
(@NPC,11,84.44618,-221.97975,128.56363,100,0,0,0),
(@NPC,12,94.70736,-211.75372,126.82122,100,0,0,0),
(@NPC,13,102.31608,-200.96086,126.3698,100,0,0,0),
(@NPC,14,102.67925,-190.42688,126.840996,100,0,0,0),
(@NPC,15,102.31608,-200.96086,126.3698,100,0,0,0),
(@NPC,16,94.74414,-211.71707,126.93881,100,0,0,0),
(@NPC,17,84.44618,-221.97975,128.56363,100,0,0,0),
(@NPC,18,78.27745,-229.598,129.22675,100,0,0,0),
(@NPC,19,68.63314,-234.3923,129.61089,100,0,0,0),
(@NPC,20,59.09082,-234.80124,129.5776,100,0,0,0),
(@NPC,21,54.188477,-237.81898,129.56352,100,0,0,0),
(@NPC,22,50.939453,-248.82593,129.1952,100,0,0,0),
(@NPC,23,42.269966,-263.3958,131.17068,100,0,0,0),
(@NPC,24,27.919922,-280.6845,133.57399,100,0,0,0),
(@NPC,25,19.927843,-289.34995,133.14389,100,0,0,0),
(@NPC,26,10.519856,-301.48434,132.67654,100,0,0,0);
-- 0x20516800000DF300000008000054FEC9 .go xyz 2.406033 -313.8656 132.95499

-- Add formation
INSERT INTO `creature_groups` VALUES (16597, 16597, 0, 0, 1);
INSERT INTO `creature_groups` VALUES (16597, 16598, 2, 1.56, 1);
DELETE FROM `creature_movement` WHERE `id`=16598;
UPDATE `creature` SET `movement_type`=0,`position_x`=399.49036,`position_y`=-1008.66956,`position_z`=111.5765 WHERE `guid`=16598;

-- Pathing for Frostwolf Battleguard Entry: 14285
SET @NPC := 16597;
UPDATE `creature` SET `wander_distance`=0,`movement_type`=2,`position_x`=400.54807,`position_y`=-1006.9721,`position_z`=111.4201 WHERE `guid`=@NPC;
DELETE FROM `creature_movement` WHERE `id`=@NPC;
INSERT INTO `creature_movement` (`id`,`point`,`position_x`,`position_y`,`position_z`,`orientation`,`waittime`,`wander_distance`,`script_id`) VALUES
(@NPC,1,400.54807,-1006.9721,111.4201,100,0,0,0),
(@NPC,2,417.56885,-1017.5779,111.95596,100,0,0,0),
(@NPC,3,431.93652,-1025.4332,112.46585,100,0,0,0),
(@NPC,4,458.3494,-1042.4708,108.24155,100,0,0,0),
(@NPC,5,466.46353,-1046.0063,108.07632,100,0,0,0),
(@NPC,6,477.20715,-1044.0026,108.41802,100,0,0,0),
(@NPC,7,484.17102,-1045.3865,108.422424,100,0,0,0),
(@NPC,8,483.02148,-1055.3776,108.6207,100,0,0,0),
(@NPC,9,482.9513,-1060.6968,108.57491,100,0,0,0),
(@NPC,10,490.05582,-1069.5542,107.91106,100,0,0,0),
(@NPC,11,498.68616,-1075.4703,107.34741,100,0,0,0),
(@NPC,12,511.56662,-1085.8783,105.41768,100,0,0,0),
(@NPC,13,518.6808,-1088.6979,105.3382,100,0,0,0),
(@NPC,14,531.08374,-1087.5563,105.797585,100,0,0,0),
(@NPC,15,518.6808,-1088.6979,105.3382,100,0,0,0),
(@NPC,16,511.56662,-1085.8783,105.41768,100,0,0,0),
(@NPC,17,498.68616,-1075.4703,107.34741,100,0,0,0),
(@NPC,18,490.05582,-1069.5542,107.91106,100,0,0,0),
(@NPC,19,482.9513,-1060.6968,108.57491,100,0,0,0),
(@NPC,20,483.02148,-1055.3776,108.6207,100,0,0,0),
(@NPC,21,484.17102,-1045.3865,108.422424,100,0,0,0),
(@NPC,22,477.20715,-1044.0026,108.41802,100,0,0,0),
(@NPC,23,466.46353,-1046.0063,108.07632,100,0,0,0),
(@NPC,24,458.3494,-1042.4708,108.24155,100,0,0,0),
(@NPC,25,431.93652,-1025.4332,112.46585,100,0,0,0),
(@NPC,26,417.56885,-1017.5779,111.95596,100,0,0,0);
-- 0x204CB000000DF3400000180002428D90 .go xyz 400.54807 -1006.9721 111.4201


-- End of migration.
END IF;
END??
delimiter ; 
CALL add_migration();
DROP PROCEDURE IF EXISTS add_migration;
