DROP PROCEDURE IF EXISTS add_migration;
delimiter ??
CREATE PROCEDURE `add_migration`()
BEGIN
DECLARE v INT DEFAULT 1;
SET v = (SELECT COUNT(*) FROM `migrations` WHERE `id`='20240125044358');
IF v=0 THEN
INSERT INTO `migrations` VALUES ('20240125044358');
-- Add your query below.


-- Make these In Range events with Spell Casts only go on cooldown when cast succeeds.
UPDATE `creature_ai_events` SET `event_flags`=(`event_flags` | 12) WHERE `id` IN (12103, 15701, 31412, 33403, 34701, 45401, 51302, 56803, 67402, 67701, 74401, 74503, 75001, 75501, 81802, 85802, 104802, 105303, 108701, 110601, 116703, 117503, 128404, 128405, 142603, 152501, 152601, 152701, 152801, 153101, 153201, 153301, 153401, 154003, 154501, 155301, 155401, 165702, 166403, 166502, 166602, 173202, 178701, 178801, 179103, 179302, 179402, 179403, 179602, 180201, 180401, 180502, 180901, 181201, 181501, 181601, 181701, 182102, 183302, 183501, 183701, 183901, 184101, 184102, 184302, 184401, 184402, 184502, 184503, 184703, 185002, 185101, 185201, 188501, 188502, 188903, 190801, 193601, 193903, 195701, 199301, 200001, 200801, 201502, 202002, 202501, 202901, 203401, 203901, 204101, 204102, 210202, 215901, 216301, 216501, 216701, 216702, 216802, 217202, 217502, 218501, 218602, 218701, 219201, 220401, 221502, 221503, 223301, 223501, 223701, 224103, 224202, 226001, 226401, 226402, 226501, 226701, 226802, 226902, 227602, 230402, 230502, 233501, 233601, 234402, 236802, 237201, 237401, 237701, 238701, 254702, 257403, 260702, 264401, 264601, 264701, 264801, 265701, 265901, 269401, 273902, 275101, 276102, 280401, 288702, 288703, 292601, 292701, 292801, 294901, 295801, 296001, 296901, 297001, 297101, 297301, 297401, 305801, 306802, 309901, 310001, 310501, 311001, 311301, 312201, 312301, 312701, 312901, 314101, 318301, 319203, 319601, 322502, 322601, 323201, 323802, 325101, 327801, 329501, 337402, 353101, 365502, 367401, 371102, 371202, 373401, 373902, 374903, 375202, 375801, 375901, 375902, 376201, 376302, 377201, 377401, 378101, 378301, 378302, 379101, 380301, 381901, 382001, 383401, 388601, 389802, 389803, 391901, 392103, 394302, 400601, 400902, 401601, 401701, 402001, 402101, 402501, 402601, 402801, 403001, 403101, 403601, 404101, 404201, 404401, 405003, 405601, 406201, 406601, 428702, 430002, 432401, 432803, 433102, 433901, 434301, 434501, 434601, 435601, 436401, 436601, 436801, 437001, 437402, 437902, 438701, 439201, 439301, 440101, 441201, 442004, 442203, 443603, 444001, 446501, 446801, 446901, 449401, 451501, 452202, 452301, 452302, 452501, 452502, 453102, 453103, 453901, 454003, 454101, 462303, 463603, 463701, 464402, 464801, 465302, 465502, 465803, 465902, 466401, 467402, 467901, 468002, 468201, 468401, 468501, 469001, 469201, 469401, 470501, 471101, 471302, 471401, 471501, 471601, 472601, 472701, 484602, 484701, 484902, 485002, 492102, 497902, 505301, 505501, 505601, 523201, 524701, 524902, 525503, 526201, 527401, 527601, 527801, 528302, 528801, 529102, 529901, 530401, 530701, 530801, 531201, 532001, 533301, 533401, 534601, 534701, 535401, 535801, 536302, 540202, 560002, 560102, 560202, 561502, 564502, 576001, 577501, 578601, 580701, 582301, 582402, 582702, 582801, 582902, 583002, 583302, 583501, 584001, 584102, 584402, 584403, 585201, 585401, 585501, 585601, 585902, 586001, 589401, 591503, 592801, 593002, 593101, 593102, 593201, 599202, 599602, 599902, 600502, 603501, 606902, 611302, 611501, 612601, 613101, 613701, 613802, 614002, 614301, 614401, 614801, 616701, 618401, 618501, 618502, 620102, 620603, 620701, 621002, 621102, 621302, 621901, 622601, 622701, 622901, 623001, 623401, 623502, 632902, 635002, 637101, 637201, 637501, 637701, 637702, 637801, 637901, 638001, 639101, 648802, 650101, 664601, 664801, 665001, 665003, 665101, 665102, 665201, 690801, 701102, 701501, 701701, 702202, 706901, 706902, 707101, 707201, 709701, 709801, 709901, 710001, 710103, 710401, 710601, 710702, 710801, 711301, 711401, 711501, 712501, 713201, 713701, 713901, 715301, 717501, 729102, 732102, 734402, 736002, 739602, 742801, 742802, 745601, 745901, 746302, 746303, 760503, 773401, 776701, 786401, 791501, 797701, 799501, 813601, 819601, 819701, 819801, 820101, 820503, 821001, 821002, 821101, 821102, 821201, 821502, 821702, 821703, 821802, 827801, 828001, 830002, 838001, 838101, 838202, 840001, 840801, 840903, 852701, 856302, 857801, 858102, 863701, 865701, 866001, 876201, 876401, 876601, 889001, 889702, 890301, 892101, 895701, 895801, 895901, 896001, 896002, 896102, 902503, 902602, 903502, 904003, 904201, 904301, 905602, 909604, 909702, 925801, 925802, 926002, 931801, 944501, 945401, 946401, 951601, 951602, 951801, 969202, 986201, 987801, 1008102, 1015701, 1016002, 1025802, 1031802, 1035601, 1035701, 1036602, 1037103, 1037203, 1038102, 1038801, 1038901, 1039103, 1039104, 1040502, 1040503, 1040602, 1040902, 1040903, 1041201, 1041301, 1041901, 1042102, 1042402, 1042501, 1042602, 1042604, 1044101, 1046101, 1046401, 1048902, 1050901, 1053601, 1058401, 1060101, 1064401, 1064701, 1067601, 1068101, 1068201, 1075601, 1075701, 1076002, 1080901, 1082202, 1082205, 1082301, 1082302, 1082602, 1083604, 1095201, 1099604, 1102201, 1103201, 1103203, 1108201, 1114202, 1129102, 1133901, 1135101, 1135103, 1144002, 1144701, 1145002, 1145101, 1147201, 1147202, 1147501, 1147602, 1148001, 1148606, 1148802, 1149702, 1149801, 1151901, 1151902, 1156302, 1156305, 1157701, 1157801, 1160302, 1161401, 1166401, 1168102, 1168201, 1168501, 1168701, 1169701, 1172702, 1177701, 1177801, 1178101, 1178301, 1178402, 1178501, 1178601, 1178701, 1179001, 1179201, 1180402, 1185901, 1188303, 1188502, 1191401, 1191502, 1192001, 1192101, 1192102, 1194903, 1194904, 1210001, 1210002, 1210101, 1214301, 1220605, 1220702, 1221701, 1221702, 1221801, 1221901, 1222001, 1222201, 1222301, 1222401, 1223701, 1223901, 1224001, 1224102, 1224801, 1225002, 1225802, 1226102, 1236901, 1238002, 1241801, 1242001, 1242002, 1242501, 1242502, 1247701, 1247702, 1249601, 1249702, 1257901, 1275902, 1280201, 1280302, 1289701, 1290001, 1294002, 1297703, 1302101, 1302102, 1302201, 1303601, 1308202, 1309604, 1309904, 1311801, 1311802, 1314101, 1314202, 1316001, 1319602, 1323603, 1325603, 1328003, 1331602, 1331702, 1332301, 1339602, 1339702, 1353301, 1359601, 1359602, 1369601, 1369602, 1406101, 1406201, 1406301, 1418401, 1430801, 1434501, 1435001, 1435103, 1437502, 1437505, 1437602, 1437605, 1438901, 1440202, 1440205, 1440302, 1440305, 1440402, 1440405, 1442303, 1442306, 1443001, 1443803, 1443806, 1443903, 1443906, 1444102, 1444105, 1444202, 1444205, 1444501, 1444701, 1444801, 1445601, 1460502, 1466101, 1469703, 1472003, 1512801, 1513002, 1514601, 1514602, 1518404, 1519501, 1520003, 1521103, 1521303, 1522903, 1523301, 1523604, 1523605, 1524002, 1524005, 1525002, 1525201, 1527710, 1530702, 1530803, 1530804, 1530806, 1531601, 1531701, 1531901, 1532501, 1533602, 1533605, 1538701, 1538802, 1538902, 1539002, 1539102, 1550501, 1553701, 1571802, 1607203, 1607204, 1614104, 1618401, 1629803, 1629903, 1637903, 1638003, 1642201, 1642301, 1643701, 1643801);
UPDATE `creature_ai_scripts` SET `data_flags`=(`data_flags` | 8) WHERE `id` IN (12103, 15701, 31412, 33403, 34701, 45401, 51302, 56803, 67402, 67701, 74401, 74503, 75001, 75501, 81802, 85802, 104802, 105303, 108701, 110601, 116703, 117503, 128404, 128405, 142603, 152501, 152601, 152701, 152801, 153101, 153201, 153301, 153401, 154003, 154501, 155301, 155401, 165702, 166403, 166502, 166602, 173202, 178701, 178801, 179103, 179302, 179402, 179403, 179602, 180201, 180401, 180502, 180901, 181201, 181501, 181601, 181701, 182102, 183302, 183501, 183701, 183901, 184101, 184102, 184302, 184401, 184402, 184502, 184503, 184703, 185002, 185101, 185201, 188501, 188502, 188903, 190801, 193601, 193903, 195701, 199301, 200001, 200801, 201502, 202002, 202501, 202901, 203401, 203901, 204101, 204102, 210202, 215901, 216301, 216501, 216701, 216702, 216802, 217202, 217502, 218501, 218602, 218701, 219201, 220401, 221502, 221503, 223301, 223501, 223701, 224103, 224202, 226001, 226401, 226402, 226501, 226701, 226802, 226902, 227602, 230402, 230502, 233501, 233601, 234402, 236802, 237201, 237401, 237701, 238701, 254702, 257403, 260702, 264401, 264601, 264701, 264801, 265701, 265901, 269401, 273902, 275101, 276102, 280401, 288702, 288703, 292601, 292701, 292801, 294901, 295801, 296001, 296901, 297001, 297101, 297301, 297401, 305801, 306802, 309901, 310001, 310501, 311001, 311301, 312201, 312301, 312701, 312901, 314101, 318301, 319203, 319601, 322502, 322601, 323201, 323802, 325101, 327801, 329501, 337402, 353101, 365502, 367401, 371102, 371202, 373401, 373902, 374903, 375202, 375801, 375901, 375902, 376201, 376302, 377201, 377401, 378101, 378301, 378302, 379101, 380301, 381901, 382001, 383401, 388601, 389802, 389803, 391901, 392103, 394302, 400601, 400902, 401601, 401701, 402001, 402101, 402501, 402601, 402801, 403001, 403101, 403601, 404101, 404201, 404401, 405003, 405601, 406201, 406601, 428702, 430002, 432401, 432803, 433102, 433901, 434301, 434501, 434601, 435601, 436401, 436601, 436801, 437001, 437402, 437902, 438701, 439201, 439301, 440101, 441201, 442004, 442203, 443603, 444001, 446501, 446801, 446901, 449401, 451501, 452202, 452301, 452302, 452501, 452502, 453102, 453103, 453901, 454003, 454101, 462303, 463603, 463701, 464402, 464801, 465302, 465502, 465803, 465902, 466401, 467402, 467901, 468002, 468201, 468401, 468501, 469001, 469201, 469401, 470501, 471101, 471302, 471401, 471501, 471601, 472601, 472701, 484602, 484701, 484902, 485002, 492102, 497902, 505301, 505501, 505601, 523201, 524701, 524902, 525503, 526201, 527401, 527601, 527801, 528302, 528801, 529102, 529901, 530401, 530701, 530801, 531201, 532001, 533301, 533401, 534601, 534701, 535401, 535801, 536302, 540202, 560002, 560102, 560202, 561502, 564502, 576001, 577501, 578601, 580701, 582301, 582402, 582702, 582801, 582902, 583002, 583302, 583501, 584001, 584102, 584402, 584403, 585201, 585401, 585501, 585601, 585902, 586001, 589401, 591503, 592801, 593002, 593101, 593102, 593201, 599202, 599602, 599902, 600502, 603501, 606902, 611302, 611501, 612601, 613101, 613701, 613802, 614002, 614301, 614401, 614801, 616701, 618401, 618501, 618502, 620102, 620603, 620701, 621002, 621102, 621302, 621901, 622601, 622701, 622901, 623001, 623401, 623502, 632902, 635002, 637101, 637201, 637501, 637701, 637702, 637801, 637901, 638001, 639101, 648802, 650101, 664601, 664801, 665001, 665003, 665101, 665102, 665201, 690801, 701102, 701501, 701701, 702202, 706901, 706902, 707101, 707201, 709701, 709801, 709901, 710001, 710103, 710401, 710601, 710702, 710801, 711301, 711401, 711501, 712501, 713201, 713701, 713901, 715301, 717501, 729102, 732102, 734402, 736002, 739602, 742801, 742802, 745601, 745901, 746302, 746303, 760503, 773401, 776701, 786401, 791501, 797701, 799501, 813601, 819601, 819701, 819801, 820101, 820503, 821001, 821002, 821101, 821102, 821201, 821502, 821702, 821703, 821802, 827801, 828001, 830002, 838001, 838101, 838202, 840001, 840801, 840903, 852701, 856302, 857801, 858102, 863701, 865701, 866001, 876201, 876401, 876601, 889001, 889702, 890301, 892101, 895701, 895801, 895901, 896001, 896002, 896102, 902503, 902602, 903502, 904003, 904201, 904301, 905602, 909604, 909702, 925801, 925802, 926002, 931801, 944501, 945401, 946401, 951601, 951602, 951801, 969202, 986201, 987801, 1008102, 1015701, 1016002, 1025802, 1031802, 1035601, 1035701, 1036602, 1037103, 1037203, 1038102, 1038801, 1038901, 1039103, 1039104, 1040502, 1040503, 1040602, 1040902, 1040903, 1041201, 1041301, 1041901, 1042102, 1042402, 1042501, 1042602, 1042604, 1044101, 1046101, 1046401, 1048902, 1050901, 1053601, 1058401, 1060101, 1064401, 1064701, 1067601, 1068101, 1068201, 1075601, 1075701, 1076002, 1080901, 1082202, 1082205, 1082301, 1082302, 1082602, 1083604, 1095201, 1099604, 1102201, 1103201, 1103203, 1108201, 1114202, 1129102, 1133901, 1135101, 1135103, 1144002, 1144701, 1145002, 1145101, 1147201, 1147202, 1147501, 1147602, 1148001, 1148606, 1148802, 1149702, 1149801, 1151901, 1151902, 1156302, 1156305, 1157701, 1157801, 1160302, 1161401, 1166401, 1168102, 1168201, 1168501, 1168701, 1169701, 1172702, 1177701, 1177801, 1178101, 1178301, 1178402, 1178501, 1178601, 1178701, 1179001, 1179201, 1180402, 1185901, 1188303, 1188502, 1191401, 1191502, 1192001, 1192101, 1192102, 1194903, 1194904, 1210001, 1210002, 1210101, 1214301, 1220605, 1220702, 1221701, 1221702, 1221801, 1221901, 1222001, 1222201, 1222301, 1222401, 1223701, 1223901, 1224001, 1224102, 1224801, 1225002, 1225802, 1226102, 1236901, 1238002, 1241801, 1242001, 1242002, 1242501, 1242502, 1247701, 1247702, 1249601, 1249702, 1257901, 1275902, 1280201, 1280302, 1289701, 1290001, 1294002, 1297703, 1302101, 1302102, 1302201, 1303601, 1308202, 1309604, 1309904, 1311801, 1311802, 1314101, 1314202, 1316001, 1319602, 1323603, 1325603, 1328003, 1331602, 1331702, 1332301, 1339602, 1339702, 1353301, 1359601, 1359602, 1369601, 1369602, 1406101, 1406201, 1406301, 1418401, 1430801, 1434501, 1435001, 1435103, 1437502, 1437505, 1437602, 1437605, 1438901, 1440202, 1440205, 1440302, 1440305, 1440402, 1440405, 1442303, 1442306, 1443001, 1443803, 1443806, 1443903, 1443906, 1444102, 1444105, 1444202, 1444205, 1444501, 1444701, 1444801, 1445601, 1460502, 1466101, 1469703, 1472003, 1512801, 1513002, 1514601, 1514602, 1518404, 1519501, 1520003, 1521103, 1521303, 1522903, 1523301, 1523604, 1523605, 1524002, 1524005, 1525002, 1525201, 1527710, 1530702, 1530803, 1530804, 1530806, 1531601, 1531701, 1531901, 1532501, 1533602, 1533605, 1538701, 1538802, 1538902, 1539002, 1539102, 1550501, 1553701, 1571802, 1607203, 1607204, 1614104, 1618401, 1629803, 1629903, 1637903, 1638003, 1642201, 1642301, 1643701, 1643801);

-- Fix wrong event types. Event param 1 and 2 values are timers, yet using In Range event.
UPDATE `creature_ai_events` SET `event_type`=0 WHERE `id` IN (773401, 154501, 454003, 497902, 492102, 1038102, 1156305, 821703, 1114202, 1039104, 1280201, 637702, 561502, 1210002, 819801, 1040503);


-- End of migration.
END IF;
END??
delimiter ; 
CALL add_migration();
DROP PROCEDURE IF EXISTS add_migration;
